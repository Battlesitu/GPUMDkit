# === User Configuration Section: Only modify these variables ===
VERSION="1.3.3"
RELEASE_DATE="2025-07-24"
HOME_PAGE="https://zhyan0603.github.io/GPUMDkit"
CONTACT="yanzihan@westlake.edu.cn"

# New features (one per line, in an array)
NEW_FEATURES=(
    "add -plt msd_all/msd_convergence"
    "add -plt loss"
)

# Bug fixes (one per line, in an array)
BUG_FIXES=(
    "fix typos in documentation"
)

# === Formatted Output Logic ===
echo "Update completed! Changelog as of $(date '+%Y-%m-%d %H:%M %Z'):"

# Check if terminal supports colors
if [ -t 1 ] && [ "$(tput colors 2>/dev/null || echo 0)" -ge 8 ]; then
    # Colorized output
    printf "\033[1;36m‚ú® GPUMDKit Update Information ‚ú®\033[0m\n"
    printf "\033[1;34m------------------------------\033[0m\n"
    printf "\033[1;32mVersion:\033[0m %s\n" "$VERSION"
    printf "\033[1;32mRelease Date:\033[0m %s\n" "$RELEASE_DATE"
    printf "\033[1;34m------------------------------\033[0m\n"
    printf "\n\033[1;33müöÄ What's New:\033[0m\n"
    for feature in "${NEW_FEATURES[@]}"; do
        printf "  ‚úÖ %s\n" "$feature"
    done
    printf "\n\033[1;33müõ† Bug Fixes:\033[0m\n"
    for fix in "${BUG_FIXES[@]}"; do
        printf "  ‚úÖ %s\n" "$fix"
    done
    printf "\033[1;34m------------------------------\033[0m\n"
    printf "\n\033[1;35müè† HomePage:\033[0m %s\n" "$HOME_PAGE"
    printf "\033[1;36müìß Contact:\033[0m %s\n" "$CONTACT"
else
    # Plain text output (no colors, simple symbols)
    printf "GPUMDKit Update Information\n"
    printf "------------------------------\n"
    printf "Version: %s\n" "$VERSION"
    printf "Release Date: %s\n" "$RELEASE_DATE"
    printf "------------------------------\n"
    printf "\nWhat's New:\n"
    for feature in "${NEW_FEATURES[@]}"; do
        printf "  - %s\n" "$feature"
    done
    printf "\nBug Fixes:\n"
    for fix in "${BUG_FIXES[@]}"; do
        printf "  - %s\n" "$fix"
    done
    printf "------------------------------\n"
    printf "\nHomePage: %s\n" "$HOME_PAGE"
    printf "Contact: %s\n" "$CONTACT"
fi